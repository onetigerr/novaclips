# Модули автоматизации NovaClips

> Список модулей для автоматизации производства faceless YouTube роликов.  
> Каждый модуль — самостоятельный компонент, который можно разрабатывать и тестировать отдельно.

---

## Оглавление

1. [Ядро системы](#1-ядро-системы)
2. [Модули подготовки контента](#2-модули-подготовки-контента)
3. [Модули аудио](#3-модули-аудио)
4. [Модули визуалов](#4-модули-визуалов)
5. [Модули сборки видео](#5-модули-сборки-видео)
6. [Модули субтитров](#6-модули-субтитров)
7. [Модули публикации](#7-модули-публикации)
8. [Модули аналитики](#8-модули-аналитики)
9. [Утилиты и сервисы](#9-утилиты-и-сервисы)

---

## 1. Ядро системы

### 1.1 `core.project`
**Управление проектами роликов.**  
Создание, хранение и версионирование проектов. Структура папок, метаданные, состояние pipeline.

### 1.2 `core.pipeline`
**Оркестрация производственного процесса.**  
Последовательный запуск фаз, отслеживание прогресса, обработка ошибок, повторные попытки (retry).

### 1.3 `core.config`
**Конфигурация и шаблоны.**  
Хранение настроек канала (голос, стиль визуалов, субтитры), шаблонов сценариев и промптов.

### 1.4 `core.storage`
**Хранение артефактов.**  
Локальное и облачное хранение файлов (аудио, картинки, видео). Кэширование и дедупликация.

---

## 2. Модули подготовки контента

### 2.1 `content.idea_generator`
**Генерация идей для роликов.**  
Анализ трендов, парсинг конкурентов, предложение тем на основе успешных паттернов.

### 2.2 `content.research`
**Автоматизация ресёрча.**  
Поиск источников, экстракция ключевых тезисов, создание саммари статей.

### 2.3 `content.script_writer`
**Генерация сценариев.**  
Создание структурированных сценариев по шаблону (hook → карта → тезисы → итог → CTA) на основе ресёрча.

### 2.4 `content.script_generator`
**Генерация сценариев с фактчекингом.**  
Мульти-агентный workflow (Автор → Редактор → Фактчекер) для создания сценариев с верификацией утверждений по трём уровням: Safe (определения), Cautious (история), Strict (числа/сравнения).

### 2.5 `content.shotlist_generator`
**Генерация шот-листа.**  
Разбиение сценария на сцены, определение типа визуала для каждой, генерация промптов для картинок.

---

## 3. Модули аудио

### 3.1 `audio.text_normalizer`
**Нормализация текста для TTS.**  
Преобразование чисел в слова, расшифровка аббревиатур, расстановка пауз (SSML).

### 3.2 `audio.tts_engine`
**Синтез речи (TTS).**  
Генерация озвучки через различные API (ElevenLabs, Azure, Google). Поддержка fallback между провайдерами.

### 3.3 `audio.timestamp_extractor`
**Извлечение word-level timestamps.**  
Получение таймингов слов из TTS API или через Whisper для синхронизации субтитров.

### 3.4 `audio.processor`
**Обработка аудио.**  
Склейка фрагментов, добавление пауз, loudness normalization, микширование с музыкой.

### 3.5 `audio.music_selector`
**Подбор фоновой музыки.**  
Подбор royalty-free треков по настроению/темпу из библиотеки или внешних сервисов.

---

## 4. Модули визуалов

### 4.1 `visuals.image_generator`
**Генерация картинок.**  
Отправка промптов в image API (DALL-E, Midjourney, Stable Diffusion), сохранение результатов.

### 4.2 `visuals.style_manager`
**Управление стилем.**  
Хранение style references, обеспечение консистентности визуального стиля между картинками.

### 4.3 `visuals.image_processor`
**Постобработка картинок.**  
Resize, crop, color correction, добавление текста/элементов поверх картинок.

### 4.4 `visuals.quality_checker`
**Проверка качества картинок.**  
Детекция артефактов, watermarks, нежелательного контента. Автоматический retry при проблемах.

### 4.5 `visuals.stock_integration`
**Интеграция со stock-библиотеками.**  
Поиск и загрузка картинок из stock-сервисов (Unsplash, Pexels) как альтернатива генерации.

### 4.6 `visuals.concept_generator`
**Генерация визуального концепта.**  
Создание 5–10 эталонных изображений персонажей и стиля для обеспечения консистентности всего ролика. Генерация Moodboard.

---

## 5. Модули сборки видео

### 5.1 `video.timeline_builder`
**Расчёт тайминга.**  
Маппинг сцен на временные отрезки аудио, расчёт длительности каждой картинки.

### 5.2 `video.compositor`
**Сборка видео из картинок.**  
Создание видео по таймингу с использованием FFmpeg, добавление переходов и motion.

### 5.3 `video.transitions`
**Переходы между сценами.**  
Библиотека переходов (fade, dissolve, slide, zoom), применение по правилам или случайно.

### 5.4 `video.motion`
**Ken Burns эффекты.**  
Добавление плавного zoom/pan на статичные картинки для создания динамики.

### 5.5 `video.audio_mixer`
**Микширование аудио.**  
Наложение голоса, фоновой музыки, звуковых эффектов. Ducking музыки под голос.

### 5.6 `video.exporter`
**Экспорт в разные форматы.**  
Экспорт для YouTube, Shorts, TikTok с разными разрешениями и aspect ratio.

---

## 6. Модули субтитров

### 6.1 `subtitles.generator`
**Генерация субтитров.**  
Создание ASS/SRT субтитров из word timestamps с правильным разбиением на строки.

### 6.2 `subtitles.styler`
**Стилизация субтитров.**  
Применение стилей (шрифт, цвет, размер, позиция, фон) по шаблону канала.

### 6.3 `subtitles.karaoke`
**Karaoke-эффект.**  
Подсветка текущего слова при произнесении для динамичного отображения.

### 6.4 `subtitles.burner`
**Вшивание субтитров в видео.**  
Hardcode субтитров в видео через FFmpeg для финального экспорта.

### 6.5 `subtitles.qa`
**Проверка субтитров.**  
Автоматическая проверка форматирования, длины строк, синхронизации с аудио.

---

## 7. Модули публикации

### 7.1 `publish.metadata_generator`
**Генерация метаданных.**  
Создание вариантов title, description, tags с помощью LLM на основе сценария.

### 7.2 `publish.chapters`
**Генерация глав/таймкодов.**  
Автоматическое создание chapters для YouTube на основе шот-листа.

### 7.3 `publish.thumbnail_generator`
**Генерация обложек.**  
Создание thumbnail вариантов с текстом и элементами для A/B тестирования.

### 7.4 `publish.youtube_uploader`
**Загрузка на YouTube.**  
Upload видео через YouTube API, установка метаданных, scheduling.

### 7.5 `publish.multi_platform`
**Кросс-постинг.**  
Публикация на несколько платформ (YouTube, TikTok, Instagram) с адаптацией формата.

---

## 8. Модули аналитики

### 8.1 `analytics.collector`
**Сбор метрик.**  
Автоматический сбор данных из YouTube Analytics API (views, CTR, retention, etc.).

### 8.2 `analytics.retention_analyzer`
**Анализ retention curve.**  
Разбор графика удержания, выявление точек падения, корреляция с сценами.

### 8.3 `analytics.reporter`
**Генерация отчётов.**  
Создание дашбордов и отчётов по производительности роликов и канала.

### 8.4 `analytics.ab_tester`
**A/B тестирование.**  
Сравнение вариантов (обложки, заголовки) и определение победителей.

---

## 9. Утилиты и сервисы

### 9.1 `utils.llm_client`
**Клиент для LLM API.**  
Унифицированный интерфейс для работы с OpenAI, Anthropic, Gemini и другими LLM.

### 9.2 `utils.ffmpeg_wrapper`
**Обёртка над FFmpeg.**  
Высокоуровневый API для частых операций с видео/аудио, обработка ошибок.

### 9.3 `utils.file_manager`
**Управление файлами.**  
Копирование, перемещение, архивация проектов, очистка временных файлов.

### 9.4 `utils.cache`
**Кэширование.**  
Кэширование результатов API-вызовов (TTS, image generation) для экономии и скорости.

### 9.5 `utils.notifications`
**Уведомления.**  
Отправка уведомлений о статусе pipeline (Telegram, Discord, email).

### 9.6 `utils.logger`
**Логирование.**  
Структурированное логирование всех операций для отладки и аудита.

---

## Приоритеты разработки

### Фаза 1: MVP (минимальный pipeline)
1. `core.project` — базовая структура проекта
2. `audio.tts_engine` — генерация озвучки
3. `audio.timestamp_extractor` — получение таймингов
4. `visuals.image_generator` — генерация картинок
5. `video.compositor` — сборка видео
6. `subtitles.generator` + `subtitles.karaoke` — субтитры
7. `utils.ffmpeg_wrapper` — работа с видео

### Фаза 2: Улучшение качества
8. `content.script_generator` — генерация сценариев с фактчекингом
9. `content.shotlist_generator` — автоматизация шот-листа
10. `visuals.concept_generator` — генерация визуального стиля и героев
11. `video.transitions` + `video.motion` — динамика
12. `audio.processor` — обработка звука
13. `subtitles.styler` — стилизация субтитров

### Фаза 3: Публикация и аналитика
13. `publish.youtube_uploader` — загрузка на YouTube
14. `publish.metadata_generator` — метаданные
15. `analytics.collector` — сбор метрик
16. `analytics.reporter` — отчёты

### Фаза 4: Масштабирование
17. `core.pipeline` — оркестрация
18. `visuals.style_manager` — консистентность стилей
19. `utils.cache` — оптимизация
20. `publish.multi_platform` — мультиплатформенность
